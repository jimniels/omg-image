<!-- 
@param {Object} _
@param {string} _/questionsById - same as doing `src/questionsById.yaml`
@param {string} _/questionId - the active in the URL, e.g. /question/:id
@param {string?} _/answerId - the active answer in the URL, e.g. /questions/:id/answers/:id

@param {string} _/questionIdNext - the next question in the sequence
@param {boolean} _/isCorrect - whether the answer is correct or not for the given page
-->

<div class="h ${@if(@equals(_/questionIdNext, '1'), 'h--end')}">
  <!-- prettier-ignore -->
  <h1 class="
    h__title
    h__title--${@if(_/isCorrect, 'correct', 'incorrect')}">
    ${@if(_/isCorrect, `Correct!`, `Incorrect`)}
  </h1>
  <a href="/questions/${_/questionIdNext}/" class="h__status">
    ${@if(@equals(_/questionIdNext, '1'), 'Start over', 'Next')}
  </a>
</div>

<div class="card">
  <a href="${_/questionsById(_/questionId)/url}" class="social-preview">
    <img
      src="/og-images/${_/questionId}.jpg"
      alt=""
      width="400"
      height="260"
      class="social-preview__image"
    />
    <div class="social-preview__content">
      <p>
        ${_/questionsById(_/questionId)/answersById(_/questionsById(_/questionId)/answerId)}
      </p>
      <cite
        >${helpers/getDomainFromUrl.js(_/questionsById(_/questionId)/url)}</cite
      >
    </div>
  </a>
</div>

<!-- prettier-ignore -->
<ul class="card answers">
    ${@map(
      _/questionsById(_/questionId)/answersById,
      (answer, answerId) => `
        <li class="
          answers__item
          ${@if(@equals(@slash/remove(answerId), _/answerId), 'answers__item--current')}
          ${@if(@equals(@slash/remove(answerId), _/questionsById(_/questionId)/answerId), 
            'answers__item--correct', 
            'answers__item--incorrect'
            )}
          ">
          ${answer}
          ${@if(@equals(@slash/remove(answerId), _/questionsById(_/questionId)/answerId), 
            ../svgs/iconCircleCheck.svg,
            @if(@equals(@slash/remove(answerId), _/answerId), ../svgs/iconCircleCross.svg)
          )}
        </li>
      `
    )}
  </ul>
